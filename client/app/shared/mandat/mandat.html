<h2 class="page-header">Gestion de mes propres mandats</h2>

<form class="form pull-right" role="form">
  <div class="form-group">
      <label for="page_search">Chercher parmis ses mandats : </label>
      <input id="page_search" type="text" class="form-control" ng-model="mandatSearchText" placeholder="Votre recherche">
  </div>
</form>

<a class="btn btn-primary" ui-sref="app.createMandat"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Ajouter un mandat</a>

<button class="btn btn-danger btn-md" ng-click="deleter()">
  <span ng-show="!enableSelecter" aria-hidden="true">Afficher les cases à cocher pour supprimer</span>
  <span ng-hide="!enableSelecter" aria-hidden="true">Suppimer les mandats selectionnées</span>
</button><br>


<br/>
<br/>


<alert type="success" ng-if="success" close="closeAlert()">
  <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> Votre mandat a bien été créé.
</alert>
<alert type="success" ng-if="editSuccess" close="closeAlert()"><span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> Votre mandat a bien été modifié.</alert>

<table class="table table-hover">
  <thead>
    <tr>
      <th>
        <span class="pull-left">Titre</span>
      </th>
      <th>
        <span class="pull-left">Adresse</span>
      </th>
      <th>
        <span class="pull-left">Prix</span>
      </th>
      <th>
        <span class="pull-left">crée</span>
      </th>
      <th>
        <span class="pull-left">fin de validité</span>
      </th>
      <th>
        <span class="pull-left">Actions</span>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="mandat in mandats | filter:mandatSearchText">
      <td>
        <a ui-sref="app.showMandat({id : mandat._id})">
        {{mandat.title}}</a>
      </td>
      <td>
        {{mandat.adresse}}
      </td>
      <td>
       {{mandat.prix | currency : ""}} €
      </td>
      <td>
        {{mandat.date_creation | date:'dd/MM/yyyy'}}
      </td>
      <td>
       {{mandat.date_validite | date:'dd/MM/yyyy'}}
      </td>
      <td>
      <td>
        <a ui-sref="app.editMandat({id : mandat._id})" class="btn btn-info btn-sm pull-left">
          <span class="glyphicon glyphicon-pencil" aria-hidden="true">
          </span> Modifier
        </a>

        <label class="btn btn-danger pull-right" ng-show="enableSelecter">
            <input type="checkbox" ng-model="toDelete[$index]"></span> supprimer? 
        </label>
      </td>
    </tr>
  </tbody>
</table>
